<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bachelor Trip Planner - Interactive Demo | Cain Menard</title>
    <meta name="description" content="Interactive bachelor trip planning app with voting, cost calculator, and availability calendar. Built with React.">
    <script src="https://cdn.tailwindcss.com"></script>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <style>
        body { margin: 0; padding: 0; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif; }
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #1e293b; }
        ::-webkit-scrollbar-thumb { background: #475569; border-radius: 4px; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .fade-in { animation: fadeIn 0.3s ease-out; }
        .demo-badge { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4); }
    </style>
</head>
<body>
    <div id="root"></div>
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
    <script type="text/babel">
        const { useState, useEffect } = React;
        
        // Storage setup
        window.storage = window.storage || {
            async get(key) {
                const value = localStorage.getItem(key);
                return value ? { value } : null;
            },
            async set(key, value) {
                localStorage.setItem(key, value);
                return { key, value };
            }
        };
        
        // Icon components
        const Icon = ({ name, className = "w-6 h-6" }) => {
            const ref = React.useRef();
            useEffect(() => {
                if (ref.current) {
                    lucide.createIcons({ icons: { [name]: lucide[name] }, attrs: { class: className } });
                }
            }, [name, className]);
            return React.createElement('i', { ref, 'data-lucide': name, className });
        };
        
        // Destination data
        const destinations = [
          {
            id: 'bozeman', name: 'Bozeman', state: 'Montana',
            tagline: 'Mountains, Rivers & Breweries',
            image: 'https://images.unsplash.com/photo-1506905925346-21bda4d32df4?w=800',
            adventureLevel: 9, nightlifeLevel: 7, costRange: '$800-1200',
            flightTime: '2hrs direct from DEN',
            bestMonths: ['May', 'Jun', 'Jul', 'Aug', 'Sep'],
            activities: ['Rafting (Class III-IV)', 'Mountain Biking', 'Brewery Crawl', 'Fly Fishing'],
            pros: ['Great balance', 'College town vibe', 'Easy access', 'Marriott downtown'],
            cons: ['Busy in summer', 'Weather unpredictable'],
            marriott: 'AC Hotel, Residence Inn', priority: 'high',
            costs: { flights: { DEN: 250, HOU: 400, ATL: 450 }, lodging: { marriott: 200, airbnb: 150 }, activities: 250, food: 100, misc: 50 }
          },
          {
            id: 'bend', name: 'Bend', state: 'Oregon',
            tagline: 'Beer Capital with Epic Trails',
            image: 'https://images.unsplash.com/photo-1551632811-561732d1e306?w=800',
            adventureLevel: 9, nightlifeLevel: 6, costRange: '$700-1000',
            flightTime: '2.5hrs via Redmond',
            bestMonths: ['May', 'Jun', 'Jul', 'Aug', 'Sep'],
            activities: ["Phil's Trail MTB", 'Deschutes River Float', 'Tumalo Falls', '30+ Breweries'],
            pros: ['30+ craft breweries', 'World-class MTB', 'Laid-back vibe', 'River floats'],
            cons: ['Nightlife closes early', 'More brewpubs than clubs'],
            marriott: 'SpringHill, Courtyard', priority: 'high',
            costs: { flights: { DEN: 300, HOU: 450, ATL: 500 }, lodging: { marriott: 180, airbnb: 140 }, activities: 200, food: 90, misc: 50 }
          },
          {
            id: 'park-city', name: 'Park City', state: 'Utah',
            tagline: 'Mountain Thrills & Main Street',
            image: 'https://images.unsplash.com/photo-1605540436563-5bca919ae766?w=800',
            adventureLevel: 9, nightlifeLevel: 7, costRange: '$900-1400',
            flightTime: '2hrs via SLC',
            bestMonths: ['May', 'Jun', 'Jul', 'Aug', 'Sep'],
            activities: ['World-Class MTB', 'Olympic Park', 'Main St Pub Crawl', 'Hiking'],
            pros: ['IMBA Gold MTB', 'Historic Main St bars', 'Upscale feel', 'Close to SLC'],
            cons: ['Pricier', 'Can feel touristy'],
            marriott: 'Marriott Mountainside', priority: 'high',
            costs: { flights: { DEN: 200, HOU: 350, ATL: 400 }, lodging: { marriott: 280, airbnb: 200 }, activities: 300, food: 120, misc: 60 }
          },
          {
            id: 'tahoe', name: 'Lake Tahoe South', state: 'CA/NV',
            tagline: 'Lake Life Meets Casinos',
            image: 'https://images.unsplash.com/photo-1544551763-46a013bb70d5?w=800',
            adventureLevel: 8, nightlifeLevel: 9, costRange: '$1000-1500',
            flightTime: '2hrs via Reno',
            bestMonths: ['Jun', 'Jul', 'Aug', 'Sep'],
            activities: ['Boat Rental', 'Flume Trail MTB', 'Casino Hopping', 'Beach Day'],
            pros: ['Best party scene', 'Incredible scenery', 'Water + mountain', 'Iconic'],
            cons: ['Most expensive', 'Very busy', 'Tourist crowds'],
            marriott: 'Timber Lodge', priority: 'high',
            costs: { flights: { DEN: 250, HOU: 450, ATL: 500 }, lodging: { marriott: 320, airbnb: 250 }, activities: 350, food: 130, misc: 80 }
          },
          {
            id: 'moab', name: 'Moab', state: 'Utah',
            tagline: 'Red Rock Adventure',
            image: 'https://images.unsplash.com/photo-1500534623283-312aade485b7?w=800',
            adventureLevel: 10, nightlifeLevel: 4, costRange: '$600-900',
            flightTime: '1.5hrs via Grand Junction',
            bestMonths: ['Apr', 'May', 'Sep', 'Oct'],
            activities: ['Slickrock Bike Trail', 'Arches NP', '4x4/ATV Tours', 'River Float'],
            pros: ['Ultimate adventure', 'Most affordable', 'Arches & Canyonlands', 'Epic scenery'],
            cons: ['Very chill nightlife', 'Just 1-2 bars', 'Hot in summer', 'Remote'],
            marriott: 'SpringHill, Element', priority: 'medium',
            costs: { flights: { DEN: 200, HOU: 400, ATL: 450 }, lodging: { marriott: 150, airbnb: 120 }, activities: 250, food: 70, misc: 40 }
          },
          {
            id: 'buena-vista', name: 'Buena Vista', state: 'Colorado',
            tagline: 'Rafting Hub & Hot Springs',
            image: 'https://images.unsplash.com/photo-1501594907352-04cda38ebc29?w=800',
            adventureLevel: 8, nightlifeLevel: 5, costRange: '$500-800',
            flightTime: '2.5hr drive from DEN',
            bestMonths: ['Jun', 'Jul', 'Aug'],
            activities: ["Brown's Canyon Rafting", 'Hot Springs', 'Salida Breweries', 'MTB'],
            pros: ['Most budget-friendly', 'World-class rafting', 'Easy for CO crew', 'Hot springs'],
            cons: ['Small town nightlife', 'Less variety', 'Short season'],
            marriott: 'Check Salida', priority: 'high',
            costs: { flights: { DEN: 0, HOU: 300, ATL: 350 }, lodging: { marriott: 140, airbnb: 100 }, activities: 180, food: 70, misc: 40 }
          }
        ];
        
        const groomsmen = [
          { id: 'cain', name: 'Cain', role: 'Groom', city: 'ATL' },
          { id: 'paul', name: 'Paul', role: 'Groomsman', city: 'HOU' },
          { id: 'kiro', name: 'Kiro', role: 'Groomsman', city: 'HOU' },
          { id: 'calum', name: 'Calum', role: 'Groomsman', city: 'DEN' },
          { id: 'tim', name: 'Tim', role: 'Groomsman', city: 'HOU' },
          { id: 'bryan', name: 'Bryan', role: 'Groomsman', city: 'DEN' }
        ];
        
        // Demo data for portfolio
        const demoVotes = {
          cain: { bozeman: 10, bend: 8, 'park-city': 10, tahoe: 10, moab: 6, 'buena-vista': 8 },
          paul: { bozeman: 10, bend: 10, 'park-city': 8, tahoe: 6, moab: 10, 'buena-vista': 10 },
          kiro: { bozeman: 8, bend: 10, 'park-city': 10, tahoe: 10, moab: 4, 'buena-vista': 6 },
          calum: { bozeman: 10, bend: 6, 'park-city': 10, tahoe: 8, moab: 8, 'buena-vista': 10 },
          tim: { bozeman: 6, bend: 10, 'park-city': 8, tahoe: 10, moab: 6, 'buena-vista': 8 },
          bryan: { bozeman: 10, bend: 8, 'park-city': 10, tahoe: 6, moab: 10, 'buena-vista': 10 }
        };
        
        const demoAvailability = {
          cain: { Mar: 'good', Apr: 'good', May: 'good', Jun: 'good' },
          paul: { Mar: 'maybe', Apr: 'good', May: 'good', Jun: 'good' },
          kiro: { Mar: 'good', Apr: 'good', May: 'good', Jun: 'maybe' },
          calum: { Mar: 'conflict', Apr: 'good', May: 'good', Jun: 'good' },
          tim: { Mar: 'good', Apr: 'good', May: 'maybe', Jun: 'good' },
          bryan: { Mar: 'good', Apr: 'good', May: 'good', Jun: 'conflict' }
        };
        
        const App = () => {
          const [currentView, setCurrentView] = useState('home');
          const [currentUser, setCurrentUser] = useState(null);
          const [votes, setVotes] = useState(demoVotes);
          const [swipeIndex, setSwipeIndex] = useState(0);
          const [availability, setAvailability] = useState(demoAvailability);
          const [calcSettings, setCalcSettings] = useState({ nights: 3, lodgingType: 'airbnb', groupSize: 6 });

          useEffect(() => {
            const loadData = async () => {
              try {
                const votesData = await window.storage.get('bachelor-votes');
                const availData = await window.storage.get('bachelor-availability');
                const userData = await window.storage.get('bachelor-current-user');
                if (votesData?.value) setVotes(JSON.parse(votesData.value));
                if (availData?.value) setAvailability(JSON.parse(availData.value));
                if (userData?.value) setCurrentUser(userData.value);
              } catch (e) { console.log('First load'); }
            };
            loadData();
          }, []);

          const saveData = async (type, data) => {
            try { await window.storage.set(`bachelor-${type}`, JSON.stringify(data)); } 
            catch (e) { console.error('Save error:', e); }
          };

          const handleVote = async (destId, rating) => {
            if (!currentUser) return;
            const newVotes = { ...votes, [currentUser]: { ...votes[currentUser], [destId]: rating } };
            setVotes(newVotes);
            await saveData('votes', newVotes);
          };

          const handleSwipeVote = async (destId, liked) => {
            await handleVote(destId, liked ? 10 : 0);
            setSwipeIndex(prev => prev + 1);
          };

          const setUser = async (userId) => {
            setCurrentUser(userId);
            await window.storage.set('bachelor-current-user', userId);
          };

          const calculateCosts = (dest) => {
            const { nights, lodgingType, groupSize } = calcSettings;
            const cityCount = groomsmen.reduce((acc, g) => { acc[g.city] = (acc[g.city] || 0) + 1; return acc; }, {});
            const avgFlight = Object.keys(cityCount).reduce((sum, city) => 
              sum + (dest.costs.flights[city] || 300) * cityCount[city], 0) / groupSize;
            const lodgingTotal = dest.costs.lodging[lodgingType] * nights;
            const foodTotal = dest.costs.food * nights;
            const perPerson = avgFlight + lodgingTotal + dest.costs.activities + foodTotal + dest.costs.misc;
            return {
              flight: Math.round(avgFlight),
              lodging: lodgingTotal,
              activities: dest.costs.activities,
              food: foodTotal,
              misc: dest.costs.misc,
              perPerson: Math.round(perPerson),
              groupTotal: Math.round(perPerson * groupSize)
            };
          };

          const voteResults = destinations.map(dest => {
            const destVotes = Object.values(votes).map(userVotes => userVotes[dest.id] || 0);
            const total = destVotes.reduce((sum, v) => sum + v, 0);
            const count = destVotes.filter(v => v > 0).length;
            const avg = count > 0 ? total / count : 0;
            return { ...dest, totalScore: total, avgScore: avg, voteCount: count };
          }).sort((a, b) => b.totalScore - a.totalScore);

          const exportToExcel = () => {
            let csv = 'Bachelor Trip Planning Data\\n\\n';
            csv += 'VOTE RESULTS\\n';
            csv += 'Rank,Destination,Total Score,Vote Count,Average Score,Adventure,Nightlife,Cost Range\\n';
            voteResults.forEach((dest, i) => {
              csv += `${i+1},${dest.name},${dest.totalScore},${dest.voteCount},${dest.avgScore.toFixed(1)},${dest.adventureLevel}/10,${dest.nightlifeLevel}/10,${dest.costRange}\\n`;
            });
            csv += '\\n\\nINDIVIDUAL VOTES\\n';
            csv += 'Person,' + destinations.map(d => d.name).join(',') + '\\n';
            groomsmen.forEach(guy => {
              const userVotes = votes[guy.id] || {};
              csv += guy.name + ',' + destinations.map(d => userVotes[d.id] || 0).join(',') + '\\n';
            });
            csv += '\\n\\nAVAILABILITY\\n';
            csv += 'Person,Jan,Feb,Mar,Apr,May,Jun,Jul\\n';
            const months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul'];
            groomsmen.forEach(guy => {
              const userAvail = availability[guy.id] || {};
              csv += guy.name + ',' + months.map(m => userAvail[m] || '').join(',') + '\\n';
            });
            csv += '\\n\\nCOST ESTIMATES (per person)\\n';
            csv += `Settings: ${calcSettings.nights} nights, ${calcSettings.lodgingType}, ${calcSettings.groupSize} people\\n`;
            csv += 'Destination,Flight,Lodging,Activities,Food,Misc,Total\\n';
            destinations.forEach(dest => {
              const costs = calculateCosts(dest);
              csv += `${dest.name},$${costs.flight},$${costs.lodging},$${costs.activities},$${costs.food},$${costs.misc},$${costs.perPerson}\\n`;
            });
            const blob = new Blob([csv], { type: 'text/csv' });
            const url = window.URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'bachelor_trip_DEMO_data.csv';
            a.click();
            window.URL.revokeObjectURL(url);
          };
          
          // User Selection Screen
          if (!currentUser) {
            return (
              <div className="min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-slate-900 flex items-center justify-center p-4">
                <div className="fixed top-4 left-1/2 -translate-x-1/2 demo-badge text-white px-6 py-3 rounded-full font-semibold text-sm z-50 fade-in">
                  üé® Portfolio Demo ‚Ä¢ Pre-loaded with sample data
                </div>
                <div className="max-w-md w-full bg-white/10 backdrop-blur-lg rounded-2xl p-8 shadow-2xl border border-white/20 fade-in">
                  <Icon name="mountain" className="w-16 h-16 text-blue-400 mx-auto mb-4" />
                  <h1 className="text-3xl font-bold text-white text-center mb-2">Bachelor Trip Planner</h1>
                  <p className="text-blue-200 text-center mb-8">Who's voting?</p>
                  <div className="space-y-3">
                    {groomsmen.map(guy => (
                      <button key={guy.id} onClick={() => setUser(guy.id)}
                        className="w-full bg-white/10 hover:bg-white/20 backdrop-blur border border-white/30 rounded-xl p-4 text-white transition-all duration-200 hover:scale-105 flex items-center justify-between group">
                        <div className="text-left">
                          <div className="font-semibold text-lg">{guy.name}</div>
                          <div className="text-sm text-blue-200">{guy.role}</div>
                        </div>
                        <div className="text-blue-400 group-hover:translate-x-1 transition-transform">‚Üí</div>
                      </button>
                    ))}
                  </div>
                  <div className="mt-6 pt-6 border-t border-white/20">
                    <a href="https://cainmenard.com" target="_blank" rel="noopener noreferrer" 
                       className="w-full text-blue-300 hover:text-blue-200 flex items-center justify-center space-x-2 text-sm transition-colors">
                      <Icon name="arrow-left" className="w-4 h-4" />
                      <span>Back to Portfolio</span>
                    </a>
                  </div>
                </div>
              </div>
            );
          }

          // Navigation Bar
          const NavBar = () => (
            <div className="fixed bottom-0 left-0 right-0 bg-slate-900/95 backdrop-blur border-t border-white/10 z-50">
              <div className="max-w-2xl mx-auto flex justify-around items-center py-3 px-4">
                <button onClick={() => setCurrentView('home')} className={`flex flex-col items-center space-y-1 ${currentView === 'home' ? 'text-blue-400' : 'text-gray-400'}`}>
                  <Icon name="mountain" className="w-6 h-6" />
                  <span className="text-xs">Browse</span>
                </button>
                <button onClick={() => setCurrentView('swipe')} className={`flex flex-col items-center space-y-1 ${currentView === 'swipe' ? 'text-blue-400' : 'text-gray-400'}`}>
                  <Icon name="heart" className="w-6 h-6" />
                  <span className="text-xs">Vote</span>
                </button>
                <button onClick={() => setCurrentView('results')} className={`flex flex-col items-center space-y-1 ${currentView === 'results' ? 'text-blue-400' : 'text-gray-400'}`}>
                  <Icon name="trending-up" className="w-6 h-6" />
                  <span className="text-xs">Results</span>
                </button>
                <button onClick={() => setCurrentView('calculator')} className={`flex flex-col items-center space-y-1 ${currentView === 'calculator' ? 'text-blue-400' : 'text-gray-400'}`}>
                  <Icon name="calculator" className="w-6 h-6" />
                  <span className="text-xs">Costs</span>
                </button>
                <button onClick={() => setCurrentView('calendar')} className={`flex flex-col items-center space-y-1 ${currentView === 'calendar' ? 'text-blue-400' : 'text-gray-400'}`}>
                  <Icon name="calendar" className="w-6 h-6" />
                  <span className="text-xs">Dates</span>
                </button>
              </div>
            </div>
          );
          
          // Browse/Home View
          if (currentView === 'home') {
            return (
              <div className="min-h-screen bg-slate-900 pb-20">
                <div className="bg-gradient-to-br from-blue-600 to-blue-800 p-6 pb-8">
                  <div className="flex justify-between items-center mb-6">
                    <div>
                      <h1 className="text-2xl font-bold text-white">Bachelor Trip</h1>
                      <p className="text-blue-100">Logged in as {groomsmen.find(g => g.id === currentUser)?.name}</p>
                    </div>
                    <div className="flex space-x-2">
                      <button onClick={exportToExcel} className="p-2 bg-white/10 hover:bg-white/20 rounded-lg">
                        <Icon name="download" className="w-5 h-5 text-white" />
                      </button>
                      <button onClick={() => setCurrentUser(null)} className="p-2 bg-white/10 hover:bg-white/20 rounded-lg">
                        <Icon name="users" className="w-5 h-5 text-white" />
                      </button>
                    </div>
                  </div>
                  <div className="bg-white/10 backdrop-blur rounded-xl p-4 border border-white/20">
                    <div className="flex items-center justify-between text-white">
                      <div>
                        <div className="text-3xl font-bold">{Object.keys(votes).length}</div>
                        <div className="text-sm text-blue-100">people voted</div>
                      </div>
                      <div>
                        <div className="text-3xl font-bold">{voteResults[0]?.name || 'TBD'}</div>
                        <div className="text-sm text-blue-100">leading</div>
                      </div>
                    </div>
                  </div>
                </div>
                <div className="max-w-2xl mx-auto px-4 -mt-4 space-y-4">
                  {destinations.map(dest => {
                    const userVote = votes[currentUser]?.[dest.id];
                    const costs = calculateCosts(dest);
                    return (
                      <div key={dest.id} className="bg-slate-800 rounded-xl overflow-hidden shadow-lg border border-slate-700">
                        <div className="relative h-48">
                          <img src={dest.image} alt={dest.name} className="w-full h-full object-cover" />
                          <div className="absolute inset-0 bg-gradient-to-t from-black/70 to-transparent" />
                          <div className="absolute bottom-4 left-4 right-4">
                            <h3 className="text-2xl font-bold text-white">{dest.name}</h3>
                            <p className="text-blue-200">{dest.tagline}</p>
                          </div>
                        </div>
                        <div className="p-4 space-y-3">
                          <div className="flex items-center justify-between text-sm">
                            <div className="flex items-center space-x-2 text-gray-300">
                              <Icon name="plane" className="w-4 h-4" />
                              <span>{dest.flightTime}</span>
                            </div>
                            <div className="flex items-center space-x-2 text-green-400 font-semibold">
                              <Icon name="dollar-sign" className="w-4 h-4" />
                              <span>${costs.perPerson}/person</span>
                            </div>
                          </div>
                          <div className="flex space-x-2">
                            <div className="flex-1 bg-slate-700/50 rounded-lg p-2 text-center">
                              <div className="text-xs text-gray-400">Adventure</div>
                              <div className="text-lg font-bold text-blue-400">{dest.adventureLevel}/10</div>
                            </div>
                            <div className="flex-1 bg-slate-700/50 rounded-lg p-2 text-center">
                              <div className="text-xs text-gray-400">Nightlife</div>
                              <div className="text-lg font-bold text-purple-400">{dest.nightlifeLevel}/10</div>
                            </div>
                          </div>
                          <div className="flex flex-wrap gap-2">
                            {dest.activities.slice(0, 3).map((activity, i) => (
                              <span key={i} className="text-xs bg-blue-500/20 text-blue-300 px-3 py-1 rounded-full">{activity}</span>
                            ))}
                          </div>
                          {userVote !== undefined && (
                            <div className="flex items-center justify-center space-x-2 text-sm">
                              {userVote > 0 ? (
                                <>
                                  <Icon name="check-circle" className="w-4 h-4 text-green-400" />
                                  <span className="text-green-400">You voted: {userVote}/10</span>
                                </>
                              ) : (
                                <>
                                  <Icon name="x" className="w-4 h-4 text-red-400" />
                                  <span className="text-red-400">You passed</span>
                                </>
                              )}
                            </div>
                          )}
                        </div>
                      </div>
                    );
                  })}
                </div>
                <NavBar />
              </div>
            );
          }
          
          // Swipe/Vote View
          if (currentView === 'swipe') {
            const currentDest = destinations[swipeIndex];
            if (!currentDest || swipeIndex >= destinations.length) {
              return (
                <div className="min-h-screen bg-slate-900 flex items-center justify-center pb-20">
                  <div className="text-center">
                    <Icon name="check-circle" className="w-20 h-20 text-green-400 mx-auto mb-4" />
                    <h2 className="text-2xl font-bold text-white mb-2">All Done!</h2>
                    <p className="text-gray-400 mb-6">You've voted on all destinations</p>
                    <button onClick={() => setCurrentView('results')} className="bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-xl font-semibold">
                      View Results
                    </button>
                  </div>
                  <NavBar />
                </div>
              );
            }
            return (
              <div className="min-h-screen bg-slate-900 flex flex-col pb-20">
                <div className="bg-slate-800 p-4 border-b border-slate-700">
                  <div className="flex items-center justify-between max-w-2xl mx-auto">
                    <h2 className="text-white font-semibold">Quick Vote</h2>
                    <span className="text-gray-400 text-sm">{swipeIndex + 1} / {destinations.length}</span>
                  </div>
                </div>
                <div className="flex-1 flex items-center justify-center p-4">
                  <div className="max-w-md w-full">
                    <div className="bg-slate-800 rounded-2xl overflow-hidden shadow-2xl border border-slate-700">
                      <div className="relative h-80">
                        <img src={currentDest.image} alt={currentDest.name} className="w-full h-full object-cover" />
                        <div className="absolute inset-0 bg-gradient-to-t from-black/80 to-transparent" />
                        <div className="absolute bottom-0 left-0 right-0 p-6">
                          <h2 className="text-3xl font-bold text-white mb-1">{currentDest.name}</h2>
                          <p className="text-blue-200 mb-3">{currentDest.tagline}</p>
                          <div className="flex items-center space-x-4 text-sm text-gray-300">
                            <span className="flex items-center">
                              <Icon name="mountain" className="w-4 h-4 mr-1" />{currentDest.adventureLevel}/10
                            </span>
                            <span className="flex items-center">
                              <Icon name="beer" className="w-4 h-4 mr-1" />{currentDest.nightlifeLevel}/10
                            </span>
                            <span>{currentDest.costRange}</span>
                          </div>
                        </div>
                      </div>
                      <div className="p-6 space-y-4">
                        <div>
                          <h3 className="text-white font-semibold mb-2">Top Activities</h3>
                          <div className="space-y-1">
                            {currentDest.activities.slice(0, 4).map((activity, i) => (
                              <div key={i} className="text-gray-300 text-sm">‚Ä¢ {activity}</div>
                            ))}
                          </div>
                        </div>
                        <div className="grid grid-cols-2 gap-3">
                          <div>
                            <h4 className="text-green-400 text-sm font-semibold mb-1">Pros</h4>
                            {currentDest.pros.slice(0, 2).map((pro, i) => (
                              <div key={i} className="text-gray-400 text-xs">‚úì {pro}</div>
                            ))}
                          </div>
                          <div>
                            <h4 className="text-red-400 text-sm font-semibold mb-1">Cons</h4>
                            {currentDest.cons.slice(0, 2).map((con, i) => (
                              <div key={i} className="text-gray-400 text-xs">‚úó {con}</div>
                            ))}
                          </div>
                        </div>
                      </div>
                    </div>
                    <div className="flex gap-4 mt-6">
                      <button onClick={() => handleSwipeVote(currentDest.id, false)}
                        className="flex-1 bg-red-500/20 hover:bg-red-500/30 border-2 border-red-500 rounded-xl p-4 flex items-center justify-center space-x-2 text-red-400 hover:scale-105 transition-all">
                        <Icon name="x" className="w-6 h-6" />
                        <span className="font-semibold">Pass</span>
                      </button>
                      <button onClick={() => handleSwipeVote(currentDest.id, true)}
                        className="flex-1 bg-green-500/20 hover:bg-green-500/30 border-2 border-green-500 rounded-xl p-4 flex items-center justify-center space-x-2 text-green-400 hover:scale-105 transition-all">
                        <Icon name="heart" className="w-6 h-6" />
                        <span className="font-semibold">Love It</span>
                      </button>
                    </div>
                  </div>
                </div>
                <NavBar />
              </div>
            );
          }
          
          // Results View
          if (currentView === 'results') {
            return (
              <div className="min-h-screen bg-slate-900 pb-20">
                <div className="bg-gradient-to-br from-green-600 to-emerald-700 p-6 pb-8">
                  <div className="flex justify-between items-center">
                    <div>
                      <h1 className="text-2xl font-bold text-white mb-2">Vote Results</h1>
                      <p className="text-green-100">{Object.keys(votes).length} of {groomsmen.length} voted</p>
                    </div>
                    <button onClick={exportToExcel} className="p-3 bg-white/10 hover:bg-white/20 rounded-xl">
                      <Icon name="download" className="w-6 h-6 text-white" />
                    </button>
                  </div>
                </div>
                <div className="max-w-2xl mx-auto px-4 -mt-4 space-y-4">
                  {voteResults.map((dest, index) => {
                    const costs = calculateCosts(dest);
                    return (
                      <div key={dest.id} className="bg-slate-800 rounded-xl p-4 border border-slate-700">
                        <div className="flex items-start space-x-4">
                          <div className="flex flex-col items-center">
                            <div className={`text-2xl font-bold ${index === 0 ? 'text-yellow-400' : index === 1 ? 'text-gray-300' : index === 2 ? 'text-orange-400' : 'text-gray-500'}`}>
                              #{index + 1}
                            </div>
                            <div className="text-xs text-gray-500">{dest.voteCount} votes</div>
                          </div>
                          <div className="flex-1">
                            <div className="flex items-center justify-between mb-2">
                              <div>
                                <h3 className="text-lg font-bold text-white">{dest.name}</h3>
                                <p className="text-sm text-gray-400">{dest.state}</p>
                              </div>
                              <div className="text-right">
                                <div className="text-2xl font-bold text-blue-400">{dest.totalScore}</div>
                                <div className="text-xs text-gray-400">total points</div>
                              </div>
                            </div>
                            <div className="relative h-2 bg-slate-700 rounded-full overflow-hidden">
                              <div className="absolute h-full bg-gradient-to-r from-blue-500 to-purple-500 transition-all duration-500"
                                style={{ width: `${(dest.totalScore / (voteResults[0].totalScore || 1)) * 100}%` }} />
                            </div>
                            <div className="mt-3 flex items-center justify-between text-xs">
                              <div className="flex space-x-3 text-gray-400">
                                <span>üèîÔ∏è {dest.adventureLevel}/10</span>
                                <span>üç∫ {dest.nightlifeLevel}/10</span>
                                <span>üí∞ ${costs.perPerson}</span>
                              </div>
                              {dest.avgScore > 0 && (
                                <div className="text-green-400">Avg: {dest.avgScore.toFixed(1)}/10</div>
                              )}
                            </div>
                          </div>
                        </div>
                      </div>
                    );
                  })}
                  <div className="bg-blue-500/10 border border-blue-500/30 rounded-xl p-4 mt-6">
                    <h3 className="text-blue-400 font-semibold mb-2">Next Steps</h3>
                    <ul className="text-sm text-gray-300 space-y-1">
                      <li>‚úì Get everyone to vote</li>
                      <li>‚úì Check availability calendar</li>
                      <li>‚Ä¢ Lock in top destination by March 1</li>
                      <li>‚Ä¢ Book flights & lodging</li>
                    </ul>
                  </div>
                </div>
                <NavBar />
              </div>
            );
          }
          
          // Calculator View
          if (currentView === 'calculator') {
            return (
              <div className="min-h-screen bg-slate-900 pb-20">
                <div className="bg-gradient-to-br from-orange-600 to-red-700 p-6 pb-8">
                  <h1 className="text-2xl font-bold text-white mb-2">Cost Calculator</h1>
                  <p className="text-orange-100">Estimate trip costs per person</p>
                </div>
                <div className="max-w-2xl mx-auto px-4 -mt-4 space-y-4">
                  <div className="bg-slate-800 rounded-xl p-6 border border-slate-700">
                    <h3 className="text-white font-semibold mb-4">Trip Settings</h3>
                    <div className="space-y-4">
                      <div>
                        <label className="text-gray-300 text-sm mb-2 block">Number of Nights</label>
                        <input type="range" min="2" max="7" value={calcSettings.nights}
                          onChange={(e) => setCalcSettings({...calcSettings, nights: parseInt(e.target.value)})}
                          className="w-full" />
                        <div className="flex justify-between text-xs text-gray-400 mt-1">
                          <span>2</span>
                          <span className="text-blue-400 font-semibold">{calcSettings.nights} nights</span>
                          <span>7</span>
                        </div>
                      </div>
                      <div>
                        <label className="text-gray-300 text-sm mb-2 block">Lodging Type</label>
                        <div className="flex space-x-2">
                          <button onClick={() => setCalcSettings({...calcSettings, lodgingType: 'marriott'})}
                            className={`flex-1 py-2 px-4 rounded-lg font-medium ${calcSettings.lodgingType === 'marriott' ? 'bg-blue-500 text-white' : 'bg-slate-700 text-gray-400 hover:bg-slate-600'}`}>
                            Marriott
                          </button>
                          <button onClick={() => setCalcSettings({...calcSettings, lodgingType: 'airbnb'})}
                            className={`flex-1 py-2 px-4 rounded-lg font-medium ${calcSettings.lodgingType === 'airbnb' ? 'bg-blue-500 text-white' : 'bg-slate-700 text-gray-400 hover:bg-slate-600'}`}>
                            Airbnb
                          </button>
                        </div>
                      </div>
                      <div>
                        <label className="text-gray-300 text-sm mb-2 block">Group Size</label>
                        <input type="number" min="4" max="8" value={calcSettings.groupSize}
                          onChange={(e) => setCalcSettings({...calcSettings, groupSize: parseInt(e.target.value)})}
                          className="w-full bg-slate-700 text-white rounded-lg px-4 py-2" />
                      </div>
                    </div>
                  </div>
                  {voteResults.slice(0, 5).map((dest) => {
                    const costs = calculateCosts(dest);
                    return (
                      <div key={dest.id} className="bg-slate-800 rounded-xl p-4 border border-slate-700">
                        <div className="flex items-center justify-between mb-3">
                          <h3 className="text-lg font-bold text-white">{dest.name}</h3>
                          <div className="text-2xl font-bold text-green-400">${costs.perPerson}</div>
                        </div>
                        <div className="space-y-2 text-sm">
                          <div className="flex items-center justify-between text-gray-300">
                            <span>‚úàÔ∏è Avg Flight</span>
                            <span className="font-semibold">${costs.flight}</span>
                          </div>
                          <div className="flex items-center justify-between text-gray-300">
                            <span>üè® Lodging ({calcSettings.nights} nights)</span>
                            <span className="font-semibold">${costs.lodging}</span>
                          </div>
                          <div className="flex items-center justify-between text-gray-300">
                            <span>üéØ Activities</span>
                            <span className="font-semibold">${costs.activities}</span>
                          </div>
                          <div className="flex items-center justify-between text-gray-300">
                            <span>üçî Food ({calcSettings.nights} days)</span>
                            <span className="font-semibold">${costs.food}</span>
                          </div>
                          <div className="flex items-center justify-between text-gray-300">
                            <span>üì¶ Misc</span>
                            <span className="font-semibold">${costs.misc}</span>
                          </div>
                          <div className="border-t border-slate-700 pt-2 mt-2 flex items-center justify-between">
                            <span className="text-white font-semibold">Total per Person</span>
                            <span className="text-xl font-bold text-green-400">${costs.perPerson}</span>
                          </div>
                          <div className="text-xs text-gray-400 text-right">
                            Group Total: ${costs.groupTotal.toLocaleString()}
                          </div>
                        </div>
                      </div>
                    );
                  })}
                  <button onClick={exportToExcel}
                    className="w-full bg-blue-600 hover:bg-blue-700 text-white rounded-xl p-4 flex items-center justify-center space-x-2 font-semibold">
                    <Icon name="download" className="w-5 h-5" />
                    <span>Export All Data to Excel</span>
                  </button>
                </div>
                <NavBar />
              </div>
            );
          }
          
          // Calendar View
          if (currentView === 'calendar') {
            const months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul'];
            return (
              <div className="min-h-screen bg-slate-900 pb-20">
                <div className="bg-gradient-to-br from-purple-600 to-indigo-700 p-6 pb-8">
                  <h1 className="text-2xl font-bold text-white mb-2">Trip Timing</h1>
                  <p className="text-purple-100">Mark your availability for 2026</p>
                </div>
                <div className="max-w-2xl mx-auto px-4 -mt-4">
                  <div className="bg-slate-800 rounded-xl p-6 border border-slate-700">
                    <div className="space-y-4">
                      {months.map(month => {
                        const isAvail = availability[currentUser]?.[month];
                        return (
                          <div key={month} className="flex items-center justify-between">
                            <div className="text-white font-medium">{month} 2026</div>
                            <div className="flex space-x-2">
                              <button onClick={async () => {
                                const newAvail = { ...availability, [currentUser]: { ...availability[currentUser], [month]: 'good' } };
                                setAvailability(newAvail);
                                await saveData('availability', newAvail);
                              }} className={`px-4 py-2 rounded-lg text-sm font-medium ${isAvail === 'good' ? 'bg-green-500 text-white' : 'bg-slate-700 text-gray-400 hover:bg-slate-600'}`}>
                                ‚úì Good
                              </button>
                              <button onClick={async () => {
                                const newAvail = { ...availability, [currentUser]: { ...availability[currentUser], [month]: 'maybe' } };
                                setAvailability(newAvail);
                                await saveData('availability', newAvail);
                              }} className={`px-4 py-2 rounded-lg text-sm font-medium ${isAvail === 'maybe' ? 'bg-yellow-500 text-white' : 'bg-slate-700 text-gray-400 hover:bg-slate-600'}`}>
                                ? Maybe
                              </button>
                              <button onClick={async () => {
                                const newAvail = { ...availability, [currentUser]: { ...availability[currentUser], [month]: 'conflict' } };
                                setAvailability(newAvail);
                                await saveData('availability', newAvail);
                              }} className={`px-4 py-2 rounded-lg text-sm font-medium ${isAvail === 'conflict' ? 'bg-red-500 text-white' : 'bg-slate-700 text-gray-400 hover:bg-slate-600'}`}>
                                ‚úó Conflict
                              </button>
                            </div>
                          </div>
                        );
                      })}
                    </div>
                  </div>
                  <div className="mt-6 space-y-3">
                    <div className="bg-green-500/10 border border-green-500/30 rounded-xl p-4">
                      <h3 className="text-green-400 font-semibold mb-2">üí° Recommended Window</h3>
                      <p className="text-gray-300 text-sm">
                        March-June 2026 looks ideal. Avoids winter weather, misses Calum's wedding conflicts, 
                        and hits peak season for mountain activities.
                      </p>
                    </div>
                    <div className="bg-slate-800 border border-slate-700 rounded-xl p-4">
                      <h3 className="text-white font-semibold mb-3">Group Availability Summary</h3>
                      <div className="space-y-2 text-sm">
                        {months.map(month => {
                          const monthAvail = groomsmen.map(guy => availability[guy.id]?.[month]).filter(Boolean);
                          const goodCount = monthAvail.filter(a => a === 'good').length;
                          const conflictCount = monthAvail.filter(a => a === 'conflict').length;
                          return (
                            <div key={month} className="flex items-center justify-between text-gray-300">
                              <span>{month}</span>
                              <div className="flex items-center space-x-2">
                                {goodCount > 0 && <span className="text-green-400">{goodCount} ‚úì</span>}
                                {conflictCount > 0 && <span className="text-red-400">{conflictCount} ‚úó</span>}
                                {monthAvail.length === 0 && <span className="text-gray-500">No responses yet</span>}
                              </div>
                            </div>
                          );
                        })}
                      </div>
                    </div>
                  </div>
                </div>
                <NavBar />
              </div>
            );
          }
          
          return null;
        };
        
        // Render
        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(React.createElement(App));
        setTimeout(() => lucide.createIcons(), 100);
    </script>
</body>
</html>
